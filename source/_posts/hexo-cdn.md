---
title: 使用cdn加速你的hexo博客静态文件
date: 2020-04-17 13:53:36
tags:
- hexo
- cdn
categories:
- hexo
- cdn
keywords:
- cdn加速
- 使用cdn加速hexo
- hexo博客静态文件
- 使用cdn加速你的hexo博客静态文件
---
>简介

操作开始前介绍两家我正在使用的cdn商家:腾讯云和七牛云.

相同点:都赠送每月10G的免费cdn加速

不同点:主要表现在腾讯云免费提供https链接加速,七牛云免费提供http链接加速

七牛云的优势:自家免费提供对象存储10G,并且回源流量啥的基本也免费,总之 `cdn+对象存储` 加速无需考虑中间费用

**注:如过你对https对Http2.0协议支持比较看好的话,并且源站不是腾讯自家的cos而是你自己的源站,推荐你使用腾讯云;因为腾讯自家的cos和cdn配合会有`回源流量`等费用,加速自己的源站起码流量只是源站的出流量,这个还要本着自己的源站出流量费价格要远低于cos出的价格才是合适的**

根据以上的说法,我自己采用的是腾讯云的cdn,因为我是将源站设置为我的hexo博客,博客本身的静态文件总量较小,并且把博客中的图片资源等大文件托管在了七牛云,配合服务器的按`流量付费`出可能连一分钱都不到,如过你买的是按`带宽付费`的带宽的话,那就更得用cdn了,不紧出的流量不会花钱,还能解决你这小管网站`css`、`js`等文件占用的带宽,导致访问速度慢的问题.

下面介绍两种免费的资源都用上,是如何配置的

1.云服务器一台

部署上我们的博客,使用`blog.xxxx.xx`域名,强烈建议使用nginx做web服务器,对静态网站支持较好,并发能力强,这一步不做演示,这都不会下面的就别看了

2.七牛云

在七牛云`对象存储`创建存储空间`res-xxxxxxxxxx`,存储区域选择`国内区域`,空间权限设置`公开`,如下图:

![创建存储空间](https://res.imgl.net/hexo/hexo-cdn/Snap4.png "创建存储空间")

进入空间管理,如下图:

![管理存储空间](https://res.imgl.net/hexo/hexo-cdn/Snap5.png "管理存储空间")
![设置加速域名](https://res.imgl.net/hexo/hexo-cdn/Snap6.png "设置加速域名")
![设置加速域名](https://res.imgl.net/hexo/hexo-cdn/Snap7.png "设置加速域名")

在七牛云`CDN`设置加速域名`res.xxxx.xx`,源站配置选择`七牛云存储`,其他默认,如下图:
![复制cname解析](https://res.imgl.net/hexo/hexo-cdn/Snap8.png "复制cname解析")

最后将如下图操作,复制cname配置到自己的域名下,如下:
|  主机记录   | 记录类型  |线路类型|记录值|MX优先级|TTL（秒）|
|  ----  | ----  |  ----  | ----  |  ----  | ----  |
| res  | CNAME |默认|res-xxxx-xx-idvajuh.qiniudns.com.|-|600|

`注意:`表格中的记录值要改成你复制的cname

>3.腾讯云

如下图创建好cdn加速站点,源站那里输入`1`步创建的站点域名
![设置加速域名](https://res.imgl.net/hexo/hexo-cdn/20200417151538.png "设置加速域名")

做好cname解析,类似七牛云的操作


![cname解析](https://res.imgl.net/hexo/hexo-cdn/20200417151546.png "cname解析")


至此,基本搭建完了,等cdn部署完毕,就可以访问cdn的域名看下效果了

**验证`ping`一下`www.xxxx.xx`如果解析出来的ip不是你服务器的ip,就说明操作完美实现,最后可已自行研究下腾讯云cdn的https配置及其他高级配置**

下面简单的说几个我目前开启的配置,可以跟风

- 1 缓存配置->缓存过期配置->高级缓存过期设置->`开启`
- 2 回源配置->Range回源配置->Range回源->`开启`
    - ->回源跟随301/302配置->回源跟随301/302->`开启`
- 3 高级配置->带宽封顶配置->带宽封顶->	`开启`
    - -> 带宽阈值	->10Gbps
    - ->超出阈值处理	->访问回源
- 4 HTTPS配置 ->强制跳转HTTPS->配置好证书
- 5 HTTP2.0配置 ->HTTP2.0->`开启`
- 6 OCSP装订配置 ->OCSP装订->`开启`
- 7 SEO优化配置 ->搜索引擎自动回源->`开启`






